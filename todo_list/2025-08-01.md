# Refactorización MRST Simulation Scripts - Eagle West Field

## Objetivo
Implementar simulación MRST para Eagle West Field siguiendo especificaciones exactas de la documentación:
- **Grid**: 20×20×10 (4,000 celdas activas)
- **Pozos**: 15 (10 productores + 5 inyectores)
- **Desarrollo**: 6 fases en 10 años (3,650 días)
- **Peak Production**: 18,500 STB/day

## Fase 1: Scripts Base
- [ ] **s01_initialize_simulation.m** - Inicializar MRST y módulos
  - Cargar módulos: ad-core, ad-blackoil, ad-props, mrst-gui, incomp, gridtools
  - Establecer ruta de configuración: /workspace/mrst_simulation_scripts/config/
  - Configurar parámetros globales: unidades, constantes físicas
  - Validar versión MRST ≥ 2023a

- [ ] **s02_build_static_model.m** - Crear grid y propiedades de roca
  - Grid cartesiano: 20×20×10 = 4,000 celdas
  - Dimensiones celda: 164×148×7.25 ft (convertir a metros)
  - Top depth: 7,881 ft (2,403.5 m)
  - Aplicar propiedades por capa según rock_properties_config.yaml
  - Implementar 5 fallas con transmisibilidad reducida

- [ ] **s03_setup_fluid_system.m** - Configurar fluidos 3-phase
  - Modelo black oil: Oil-Water-Gas
  - API: 32°, GOR: 450 scf/STB, Pb: 2,100 psi
  - Tablas PVT según fluid_properties_config.yaml
  - Relative permeability: Corey con endpoints especificados
  - Capillary pressure: Leverett J-function

## Fase 2: Modelo Inicial
- [ ] **s04_initialize_model.m** - Establecer presión y saturación inicial
  - Presión: 2,900 psi @ 8,000 ft datum
  - OWC: 8,150 ft TVDSS
  - Método: hydrostatic_equilibrium con gravity-capillary balance
  - Saturación inicial: So=0.75, Sw=0.25 sobre OWC
  - Validar equilibrio según initial_conditions_config.yaml

- [ ] **s05_implement_wells.m** - Implementar 15 pozos (10P + 5I)
  - Productores: EW-001 a EW-010 (según wells_schedule_config.yaml)
  - Inyectores: IW-001 a IW-005
  - Control por fases: rate/BHP según development_schedule
  - Well index: Peaceman con skin factors especificados
  - Completions: multi-capa según Wells_Completions.md

## Fase 3: Ejecución
- [ ] **s06_run_simulation.m** - Ejecutar simulación 3,650 días
  - Solver: Fully-implicit con AutoDiff
  - Newton tolerance: 1e-6, max iterations: 25
  - Timestep adaptivo: inicial 1 día, max 30 días
  - 6 fases de desarrollo según schedule
  - Material balance check < 0.01%

- [ ] **s07_export_results.m** - Exportar resultados a archivos
  - Estructura: /output/initial/, /static/, /dynamic/, /metadata/
  - Frecuencia: mensual para datos dinámicos
  - Formato: CSV para series temporales, MAT para snapshots
  - Incluir: presión, saturación, rates, BHP por pozo

## Fase 4: Reportes
- [ ] **s08_generate_reports.m** - Generar visualizaciones y reportes
  - Reportes por fase de desarrollo (6 reportes)
  - Gráficas: producción, inyección, presión, water cut
  - Mapas: saturación, presión por capa
  - Validar vs targets: 18,500 STB/day peak, VRR 1.1-1.18

- [ ] **s00_run_complete_workflow.m** - Script maestro que ejecuta todo
  - Ejecutar s01→s02→s03→s04→s05→s06→s07→s08 secuencialmente
  - Checkpoints entre fases con validación
  - Log de ejecución con timestamps
  - Manejo de errores y reintentos

## Utilidades
- [ ] **util_read_config.m** - Leer archivos YAML (verificar si existe)
- [ ] Crear carpeta /output con subdirectorios
- [ ] Crear carpeta /reports para reportes finales

## Parámetros Críticos (NO modificar)
- Grid: 20×20×10 (4,000 celdas)
- Pozos: 15 (10P + 5I)
- Presión inicial: 2,900 psi @ 8,000 ft
- OWC: 8,150 ft
- API: 32°, GOR: 450, Pb: 2,100 psi
- Temperatura: 176°F
- Desarrollo: 6 fases, 10 años

## Estado
- Completado: Configuraciones YAML (5/5)
- Pendiente: Scripts MATLAB (0/9)
- En progreso: Ninguno

## Referencias Documentación
- Grid/Faults: 01_Structural_Geology.md, 08_MRST_Implementation.md
- Rock Props: 02_Rock_Properties.md, rock_properties_config.yaml
- Fluids: 03_Fluid_Properties.md, fluid_properties_config.yaml
- Wells: 05_Wells_Completions.md, 06_Production_History.md
- Initial: 07_Initialization.md, initial_conditions_config.yaml

## Próximo paso
Crear s01_initialize_simulation.m siguiendo 08_MRST_Implementation.md líneas 17-44